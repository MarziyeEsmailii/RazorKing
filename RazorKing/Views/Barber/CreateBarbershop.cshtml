@model RazorKing.Models.ViewModels.CreateBarbershopViewModel
@{
    ViewData["Title"] = "ایجاد آرایشگاه جدید";
    Layout = "_LayoutModern";
}

<div class="create-barbershop-container">
    <div class="container-fluid h-100">
        <div class="row h-100 align-items-center">
            <!-- Main Form Container -->
            <div class="col-12">
                <div class="create-form-card">
                    <!-- Header -->
                    <div class="form-header text-center">
                        <div class="welcome-icon">
                            <i class="fas fa-store"></i>
                        </div>
                        <h2 class="header-title">خوش آمدید!</h2>
                        <p class="header-subtitle">برای شروع کار، ابتدا اطلاعات آرایشگاه خود را ثبت کنید</p>
                        <div class="progress-indicator">
                            <div class="step active">
                                <span class="step-number">1</span>
                                <span class="step-text">ثبت آرایشگاه</span>
                            </div>
                            <div class="step-arrow">→</div>
                            <div class="step">
                                <span class="step-number">2</span>
                                <span class="step-text">پنل مدیریت</span>
                            </div>
                        </div>
                    </div>

                    <form asp-action="CreateBarbershop" method="post" enctype="multipart/form-data" class="compact-form">
                        @if (!ViewData.ModelState.IsValid && ViewData.ModelState.ErrorCount > 0)
                        {
                            <div class="alert alert-danger">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                لطفاً خطاهای موجود در فرم را برطرف کنید
                            </div>
                        }

                        <div class="form-grid">
                            <!-- Left Column -->
                            <div class="form-column">
                                <div class="form-section">
                                    <h5 class="section-title">
                                        <i class="fas fa-info-circle"></i>
                                        اطلاعات پایه
                                    </h5>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label asp-for="Name" class="form-label">
                                                <i class="fas fa-store"></i>نام آرایشگاه
                                            </label>
                                            <input asp-for="Name" class="form-control" placeholder="نام آرایشگاه خود را وارد کنید" />
                                            <span asp-validation-for="Name" class="text-danger"></span>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label asp-for="Phone" class="form-label">
                                                <i class="fas fa-phone"></i>شماره تماس
                                            </label>
                                            <input asp-for="Phone" class="form-control" placeholder="09123456789" />
                                            <span asp-validation-for="Phone" class="text-danger"></span>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label asp-for="Description" class="form-label">
                                            <i class="fas fa-align-left"></i>توضیحات
                                        </label>
                                        <textarea asp-for="Description" class="form-control" rows="3" placeholder="توضیح کوتاهی از آرایشگاه خود بنویسید..."></textarea>
                                        <span asp-validation-for="Description" class="text-danger"></span>
                                    </div>

                                    <div class="form-row">
                                        <div class="form-group flex-2">
                                            <label asp-for="Address" class="form-label">
                                                <i class="fas fa-map-marker-alt"></i>آدرس
                                            </label>
                                            <textarea asp-for="Address" class="form-control" rows="2" placeholder="آدرس کامل آرایشگاه"></textarea>
                                            <span asp-validation-for="Address" class="text-danger"></span>
                                        </div>
                                        
                                        <div class="form-group flex-1">
                                            <label asp-for="CityId" class="form-label">
                                                <i class="fas fa-city"></i>شهر
                                            </label>
                                            <div class="city-select-wrapper">
                                                <select asp-for="CityId" class="form-select">
                                                    <option value="" style="background-color: #2d2d2d; color: #ccc;">انتخاب شهر</option>
                                                    @foreach (var city in Model.Cities)
                                                    {
                                                        <option value="@city.Id" style="background-color: #2d2d2d; color: #fff;">@city.Name</option>
                                                    }
                                                </select>
                                            </div>
                                            <span asp-validation-for="CityId" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Right Column -->
                            <div class="form-column">
                                <div class="form-section">
                                    <h5 class="section-title">
                                        <i class="fas fa-clock"></i>
                                        ساعات کاری
                                    </h5>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label asp-for="OpenTime" class="form-label">
                                                <i class="fas fa-sun"></i>شروع کار
                                            </label>
                                            <input asp-for="OpenTime" type="time" class="form-control" value="@Model.OpenTimeString" />
                                            <span asp-validation-for="OpenTime" class="text-danger"></span>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label asp-for="CloseTime" class="form-label">
                                                <i class="fas fa-moon"></i>پایان کار
                                            </label>
                                            <input asp-for="CloseTime" type="time" class="form-control" value="@Model.CloseTimeString" />
                                            <span asp-validation-for="CloseTime" class="text-danger"></span>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-calendar-week"></i>روزهای کاری
                                        </label>
                                        <div class="days-grid">
                                            @{
                                                var days = new Dictionary<string, string>
                                                {
                                                    { "شنبه", "Saturday" },
                                                    { "یکشنبه", "Sunday" },
                                                    { "دوشنبه", "Monday" },
                                                    { "سه‌شنبه", "Tuesday" },
                                                    { "چهارشنبه", "Wednesday" },
                                                    { "پنج‌شنبه", "Thursday" },
                                                    { "جمعه", "Friday" }
                                                };
                                                var selectedDays = Model.WorkingDays?.Split(',').Select(d => d.Trim()).ToList() ?? new List<string>();
                                            }
                                            @foreach (var day in days)
                                            {
                                                <div class="day-item">
                                                    <input type="checkbox" id="day_@day.Value" name="WorkingDaysArray" value="@day.Key" 
                                                           @(selectedDays.Contains(day.Key) ? "checked" : "") />
                                                    <label for="day_@day.Value">@day.Key</label>
                                                </div>
                                            }
                                        </div>
                                        <input asp-for="WorkingDays" type="hidden" id="workingDaysHidden" />
                                        <span asp-validation-for="WorkingDays" class="text-danger"></span>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-image"></i>تصویر آرایشگاه (اختیاری)
                                        </label>
                                        <div class="image-upload-compact">
                                            <input type="file" name="imageFile" id="imageFile" class="d-none" accept="image/*" />
                                            <div class="upload-area-compact" onclick="document.getElementById('imageFile').click()">
                                                <div class="upload-content-compact">
                                                    <i class="fas fa-cloud-upload-alt"></i>
                                                    <span>انتخاب تصویر</span>
                                                </div>
                                                <div class="upload-preview-compact d-none" id="uploadPreview">
                                                    <img id="previewImage" src="" alt="پیش‌نمایش" />
                                                    <button type="button" class="remove-btn" id="removeImage">
                                                        <i class="fas fa-times"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <small class="form-text">JPG, PNG, GIF - حداکثر 5MB</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Features Preview -->
                        <div class="features-preview">
                            <div class="features-title">
                                <i class="fas fa-star"></i>
                                امکانات در انتظار شما
                            </div>
                            <div class="features-grid">
                                <div class="feature-item">
                                    <i class="fas fa-calendar-check"></i>
                                    <span>مدیریت نوبت‌ها</span>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-chart-line"></i>
                                    <span>گزارش‌گیری</span>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-mobile-alt"></i>
                                    <span>دسترسی موبایل</span>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-users"></i>
                                    <span>مدیریت مشتریان</span>
                                </div>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="form-actions">
                            <button type="submit" class="btn-create">
                                <i class="fas fa-plus"></i>
                                <span>ایجاد آرایشگاه</span>
                                <div class="btn-shine"></div>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/create-barbershop.css" asp-append-version="true">
}

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="~/js/create-barbershop.js" asp-append-version="true"></script>
}