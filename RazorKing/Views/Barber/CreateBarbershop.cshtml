@model RazorKing.Models.ViewModels.CreateBarbershopViewModel
@{
    ViewData["Title"] = "ایجاد آرایشگاه جدید";
    Layout = "_LayoutModern";
}

<div class="create-barbershop-container">
    <div class="container-fluid">
        <div class="row min-vh-100">
            <!-- Left Side - Form -->
            <div class="col-lg-8 col-xl-9 d-flex align-items-center">
                <div class="create-form-wrapper w-100">
                    <div class="create-header text-center mb-5">
                        <div class="icon-wrapper mb-3">
                            <i class="fas fa-store"></i>
                        </div>
                        <h1 class="display-5 fw-bold text-gold mb-3">آرایشگاه خود را راه‌اندازی کنید</h1>
                        <p class="lead text-light-gray">با تکمیل اطلاعات زیر، آرایشگاه خود را ثبت کرده و شروع به پذیرش مشتری کنید</p>
                    </div>

                    <form asp-action="CreateBarbershop" method="post" enctype="multipart/form-data" class="create-form">
                        <div asp-validation-summary="All" class="alert alert-danger mb-4"></div>

                        <!-- Progress Steps -->
                        <div class="progress-steps mb-5">
                            <div class="step active" data-step="1">
                                <div class="step-number">1</div>
                                <div class="step-title">اطلاعات پایه</div>
                            </div>
                            <div class="step" data-step="2">
                                <div class="step-number">2</div>
                                <div class="step-title">ساعات کاری</div>
                            </div>
                            <div class="step" data-step="3">
                                <div class="step-number">3</div>
                                <div class="step-title">تصویر و تکمیل</div>
                            </div>
                        </div>

                        <!-- Step 1: Basic Information -->
                        <div class="form-step active" id="step-1">
                            <div class="step-header mb-4">
                                <h3><i class="fas fa-info-circle text-gold me-2"></i>اطلاعات پایه آرایشگاه</h3>
                                <p class="text-muted">نام و اطلاعات اصلی آرایشگاه خود را وارد کنید</p>
                            </div>

                            <div class="row g-4">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input asp-for="Name" class="form-control" placeholder="نام آرایشگاه" />
                                        <label asp-for="Name">
                                            <i class="fas fa-store me-2"></i>نام آرایشگاه
                                        </label>
                                        <span asp-validation-for="Name" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input asp-for="Phone" class="form-control" placeholder="شماره تماس" />
                                        <label asp-for="Phone">
                                            <i class="fas fa-phone me-2"></i>شماره تماس
                                        </label>
                                        <span asp-validation-for="Phone" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-floating">
                                        <textarea asp-for="Description" class="form-control" style="height: 120px" placeholder="توضیحات"></textarea>
                                        <label asp-for="Description">
                                            <i class="fas fa-align-left me-2"></i>توضیحات آرایشگاه
                                        </label>
                                        <span asp-validation-for="Description" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="form-floating">
                                        <textarea asp-for="Address" class="form-control" style="height: 100px" placeholder="آدرس"></textarea>
                                        <label asp-for="Address">
                                            <i class="fas fa-map-marker-alt me-2"></i>آدرس کامل
                                        </label>
                                        <span asp-validation-for="Address" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-floating">
                                        <select asp-for="CityId" class="form-select">
                                            <option value="">انتخاب شهر...</option>
                                            @foreach (var city in Model.Cities)
                                            {
                                                <option value="@city.Id">@city.Name</option>
                                            }
                                        </select>
                                        <label asp-for="CityId">
                                            <i class="fas fa-city me-2"></i>شهر
                                        </label>
                                        <span asp-validation-for="CityId" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="step-actions mt-5">
                                <button type="button" class="btn btn-gold btn-lg next-step">
                                    مرحله بعد <i class="fas fa-arrow-left ms-2"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Step 2: Working Hours -->
                        <div class="form-step" id="step-2">
                            <div class="step-header mb-4">
                                <h3><i class="fas fa-clock text-gold me-2"></i>ساعات و روزهای کاری</h3>
                                <p class="text-muted">زمان‌بندی کاری آرایشگاه خود را تعیین کنید</p>
                            </div>

                            <div class="row g-4">
                                <div class="col-md-6">
                                    <div class="time-picker-wrapper">
                                        <label class="form-label">
                                            <i class="fas fa-sun text-warning me-2"></i>ساعت شروع کار
                                        </label>
                                        <input asp-for="OpenTime" type="time" class="form-control time-input" />
                                        <span asp-validation-for="OpenTime" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="time-picker-wrapper">
                                        <label class="form-label">
                                            <i class="fas fa-moon text-info me-2"></i>ساعت پایان کار
                                        </label>
                                        <input asp-for="CloseTime" type="time" class="form-control time-input" />
                                        <span asp-validation-for="CloseTime" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="working-days-section mt-4">
                                <label class="form-label mb-3">
                                    <i class="fas fa-calendar-week text-gold me-2"></i>روزهای کاری
                                </label>
                                <div class="working-days-grid">
                                    @{
                                        var days = new Dictionary<string, string>
                                        {
                                            { "شنبه", "Saturday" },
                                            { "یکشنبه", "Sunday" },
                                            { "دوشنبه", "Monday" },
                                            { "سه‌شنبه", "Tuesday" },
                                            { "چهارشنبه", "Wednesday" },
                                            { "پنج‌شنبه", "Thursday" },
                                            { "جمعه", "Friday" }
                                        };
                                        var selectedDays = Model.WorkingDays?.Split(',').Select(d => d.Trim()).ToList() ?? new List<string>();
                                    }
                                    @foreach (var day in days)
                                    {
                                        <div class="day-card">
                                            <input type="checkbox" id="day_@day.Value" name="WorkingDaysArray" value="@day.Key" 
                                                   @(selectedDays.Contains(day.Key) ? "checked" : "") />
                                            <label for="day_@day.Value">
                                                <div class="day-name">@day.Key</div>
                                                <div class="day-status">
                                                    <i class="fas fa-check"></i>
                                                </div>
                                            </label>
                                        </div>
                                    }
                                </div>
                                <input asp-for="WorkingDays" type="hidden" id="workingDaysHidden" />
                                <span asp-validation-for="WorkingDays" class="text-danger"></span>
                            </div>

                            <div class="step-actions mt-5">
                                <button type="button" class="btn btn-outline-light btn-lg prev-step me-3">
                                    <i class="fas fa-arrow-right me-2"></i>مرحله قبل
                                </button>
                                <button type="button" class="btn btn-gold btn-lg next-step">
                                    مرحله بعد <i class="fas fa-arrow-left ms-2"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Step 3: Image and Completion -->
                        <div class="form-step" id="step-3">
                            <div class="step-header mb-4">
                                <h3><i class="fas fa-image text-gold me-2"></i>تصویر آرایشگاه</h3>
                                <p class="text-muted">تصویری از آرایشگاه خود آپلود کنید (اختیاری)</p>
                            </div>

                            <div class="image-upload-section">
                                <div class="upload-area" id="uploadArea">
                                    <div class="upload-content">
                                        <i class="fas fa-cloud-upload-alt upload-icon"></i>
                                        <h4>تصویر آرایشگاه را آپلود کنید</h4>
                                        <p>فایل را اینجا بکشید یا کلیک کنید</p>
                                        <input type="file" name="imageFile" id="imageFile" class="d-none" accept="image/*" />
                                        <button type="button" class="btn btn-outline-gold" onclick="document.getElementById('imageFile').click()">
                                            انتخاب فایل
                                        </button>
                                    </div>
                                    <div class="upload-preview d-none" id="uploadPreview">
                                        <img id="previewImage" src="" alt="پیش‌نمایش" />
                                        <button type="button" class="btn btn-sm btn-danger remove-image" id="removeImage">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                                <small class="form-text text-muted mt-2">
                                    فرمت‌های مجاز: JPG, PNG, GIF - حداکثر 5MB
                                </small>
                            </div>

                            <div class="completion-info mt-5">
                                <div class="info-card">
                                    <h5><i class="fas fa-lightbulb text-warning me-2"></i>مراحل بعدی</h5>
                                    <ul class="completion-list">
                                        <li><i class="fas fa-check-circle text-success me-2"></i>پس از ایجاد آرایشگاه، خدمات خود را اضافه کنید</li>
                                        <li><i class="fas fa-check-circle text-success me-2"></i>برنامه کاری تفصیلی خود را تنظیم کنید</li>
                                        <li><i class="fas fa-check-circle text-success me-2"></i>مشتریان می‌توانند نوبت رزرو کنند</li>
                                        <li><i class="fas fa-check-circle text-success me-2"></i>از پنل مدیریت خود استفاده کنید</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="step-actions mt-5">
                                <button type="button" class="btn btn-outline-light btn-lg prev-step me-3">
                                    <i class="fas fa-arrow-right me-2"></i>مرحله قبل
                                </button>
                                <button type="submit" class="btn btn-gold btn-lg btn-create">
                                    <i class="fas fa-plus me-2"></i>ایجاد آرایشگاه
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Right Side - Info Panel -->
            <div class="col-lg-4 col-xl-3 d-none d-lg-flex">
                <div class="info-panel">
                    <div class="info-content">
                        <div class="info-header">
                            <h4>مزایای عضویت</h4>
                        </div>
                        
                        <div class="feature-list">
                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <div class="feature-content">
                                    <h6>مدیریت نوبت‌ها</h6>
                                    <p>سیستم پیشرفته رزرو و مدیریت نوبت‌های مشتریان</p>
                                </div>
                            </div>

                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="feature-content">
                                    <h6>گزارش‌گیری</h6>
                                    <p>آمار و گزارش کامل از درآمد و عملکرد آرایشگاه</p>
                                </div>
                            </div>

                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-mobile-alt"></i>
                                </div>
                                <div class="feature-content">
                                    <h6>دسترسی موبایل</h6>
                                    <p>مدیریت آرایشگاه از هر مکان با گوشی هوشمند</p>
                                </div>
                            </div>

                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="feature-content">
                                    <h6>مدیریت مشتریان</h6>
                                    <p>ثبت و پیگیری اطلاعات مشتریان و تاریخچه خدمات</p>
                                </div>
                            </div>
                        </div>

                        <div class="support-info">
                            <div class="support-card">
                                <i class="fas fa-headset"></i>
                                <h6>پشتیبانی ۲۴/۷</h6>
                                <p>تیم پشتیبانی ما همیشه در خدمت شماست</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/create-barbershop.css" asp-append-version="true">
}

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="~/js/create-barbershop.js" asp-append-version="true"></script>
}